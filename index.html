<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>AI Water Chat â€“ Multi User</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  padding: 0;
  font-family: 'Cairo', sans-serif;
  background: #000;
  color: #fff;
  overflow: hidden;
}

/* Canvas ØªØ£Ø«ÙŠØ± Ø§Ù„Ù…Ø§Ø¡ */
#ripple { position: fixed; top: 0; left:0; width:100%; height:100%; z-index:-2; }
.fog { position: fixed; top:0; left:0; width:100%; height:100%; background: radial-gradient(circle, rgba(0,255,255,0.05), rgba(0,0,0,0.7)); z-index:-1; }

/* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© */
.chat-container { width: 90%; max-width:700px; margin:auto; margin-top:20px; }
.user-select { display:flex; justify-content:center; margin-bottom:15px; gap:10px; }
.user-btn { padding:10px 18px; border:none; border-radius:12px; background:#00eaff; color:#000; cursor:pointer; font-weight:bold; box-shadow:0 0 10px #00eaff; }

.chat-box {
  padding: 20px;
  background: rgba(0,0,0,0.35);
  border:1px solid #00eaff;
  border-radius:20px;
  backdrop-filter: blur(8px);
  box-shadow:0 0 30px #00eaff;
}
#messages { height:400px; overflow-y:auto; padding:10px; }
.msg { padding:12px; margin-bottom:10px; border-radius:12px; border:1px solid #0ff; animation:pop 0.4s ease; }
@keyframes pop { 0% { transform: scale(0.7); opacity:0; } 100% { transform: scale(1); opacity:1; } }
#input-box { display:flex; margin-top:10px; }
#input-text { flex:1; padding:12px; border-radius:12px; border:none; outline:none; font-size:16px; }
#send-btn { padding:12px 20px; border:none; background:#00eaff; color:#000; font-weight:bold; border-radius:12px; margin-left:10px; cursor:pointer; box-shadow:0 0 15px #00eaff; }

</style>
</head>

<body>
<canvas id="ripple"></canvas>
<div class="fog"></div>

<div class="chat-container">
  <div class="user-select" id="user-select">
    <button class="user-btn" onclick="selectUser('User1')">User1</button>
    <button class="user-btn" onclick="selectUser('User2')">User2</button>
    <button class="user-btn" onclick="selectUser('User3')">User3</button>
  </div>

  <div class="chat-box">
    <h2 id="chat-title">ğŸ’§ AI Water Chat</h2>
    <div id="messages"></div>

    <div id="input-box">
      <input id="input-text" type="text" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ..." />
      <button id="send-btn">Ø¥Ø±Ø³Ø§Ù„</button>
    </div>
  </div>
</div>

<script>
// --- ØªØ£Ø«ÙŠØ± Ø§Ù„Ù…Ø§Ø¡ ---
const canvas = document.getElementById('ripple');
const ctx = canvas.getContext('2d');
canvas.width = innerWidth; canvas.height = innerHeight;
let drops = [];
function splash(x,y){ drops.push({x,y,radius:2,alpha:1}); }
function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drops.forEach((d,i)=>{
    ctx.beginPath();
    ctx.arc(d.x,d.y,d.radius,0,Math.PI*2);
    ctx.strokeStyle=`rgba(0,255,255,${d.alpha})`;
    ctx.lineWidth=2; ctx.stroke();
    d.radius+=1.5; d.alpha-=0.01;
    if(d.alpha<=0) drops.splice(i,1);
  });
  requestAnimationFrame(draw);
}
draw();
window.addEventListener("click", e=>{ splash(e.clientX,e.clientY); });

// --- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ---
let currentUser = 'User1';
let chats = JSON.parse(localStorage.getItem('chats') || '{}');

function selectUser(user){
  currentUser=user;
  document.getElementById('chat-title').innerText = 'ğŸ’§ AI Water Chat â€“ ' + user;
  renderMessages();
}

function renderMessages(){
  const messagesDiv = document.getElementById('messages');
  messagesDiv.innerHTML='';
  const msgs = chats[currentUser]||[];
  msgs.forEach(m=>{
    const div=document.createElement('div');
    div.className='msg';
    div.style.borderColor=m.fromAI?'#0f0':'#0ff';
    div.innerText=m.text;
    messagesDiv.appendChild(div);
  });
  messagesDiv.scrollTop = messagesDiv.scrollHeight;
}

// --- Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© ---
function addMessage(text, fromAI=false){
  if(!chats[currentUser]) chats[currentUser]=[];
  chats[currentUser].push({text, fromAI});
  localStorage.setItem('chats', JSON.stringify(chats));
  renderMessages();
}

// --- Ø±Ø¯ AI ÙˆÙ‡Ù…ÙŠ ---
async function askAI(text){
  return "ğŸ¤–âœ¨ Ø±Ø¯ Ø§Ø­ØªØ±Ø§ÙÙŠ Ù…Ù† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ:\n" + text;
}

// --- Ø­Ø¯Ø« Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ---
const input = document.getElementById('input-text');
const btn = document.getElementById('send-btn');
btn.onclick=async()=>{
  const text=input.value.trim();
  if(!text) return;
  addMessage(text,false);
  splash(innerWidth/2,innerHeight/2);
  input.value='';
  const reply = await askAI(text);
  addMessage(reply,true);
}

// Ø¨Ø¯Ø¡ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
selectUser('User1');
</script>

</body>
</html>
